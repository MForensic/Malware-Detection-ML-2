import json
import pandas as pd
import os
from sklearn.datasets.base import Bunch
data=pd.read_excel('mergewothdkom.xlsx', sheetname='Sheet1')


#print data


meta = {
	'target_names':list(data.target_name.unique()),
	'targets':list(data.target.unique()),
	'features': list(data.columns[:-2])
}

with open('data/meta.json', 'w') as f:
	json.dump(meta, f, indent=2)


def load_data(root='data'):
	with open(os.path.join(root, 'meta.json'), 'r') as f:
		meta=json.load(f)
	names = meta['features']
#	print names[:-1]
	train = pd.read_excel(os.path.join(root,'mergewothdkom.xlsx'), sheetname='Sheet1')
#	train=list(train)
	train = train.values
#	print train
	test = pd.read_excel(os.path.join(root,'merge_test1.xlsx'), sheetname='Sheet1')
	test=test.values
#	print names[-1]
#	test=list(test)
	return Bunch(

	data=train[:, :-2],
	target=train[:,-2],
	data_test=test[:,:-1],
	target_test=test[:,-1],
	target_names=meta['target_names'],
	feature_names=meta['features'],
)

dataset=load_data()
#dataset.target = int (dataset.target)
#print dataset.data[0]
#print dataset.target[0]
#print dataset.data_test

